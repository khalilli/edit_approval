{"ast":null,"code":"import _asyncToGenerator from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import create from'zustand';import{devtools}from'zustand/middleware';import initiateWorkflow from'../feautures/companyDetails/api/initiateWorkflow';var handleSetCompany=function handleSetCompany(set,get,args){var companyDetails=Object.assign({},get().companyDetails);var _iterator=_createForOfIteratorHelper(args),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var object=_step.value;switch(object.property){case'name':companyDetails.name=object.value;break;case'segment':companyDetails.segment=object.value;break;case'share':companyDetails.share=object.value;break;case'numberOfEmployees':companyDetails.numberOfEmployees=object.value;break;case'ceo':companyDetails.ceo=object.value;break;case'countryOfOperation':companyDetails.countryOfOperation=object.value;break;default:break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}set({companyDetails:companyDetails});};var handleInitiateWorkflow=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(set,get){var companyDetails,args;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:companyDetails=get().companyDetails;args={cname:companyDetails.name,countemp:companyDetails.numberOfEmployees,ceo:companyDetails.ceo};_context.next=4;return initiateWorkflow(args);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleInitiateWorkflow(_x,_x2){return _ref.apply(this,arguments);};}();var handleGetCompanyDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(set,get){var params,key,response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=new URLSearchParams(window.location.search);key=parseInt(params.get(\"key\"));if(Number.isNaN(key)){_context2.next=9;break;}_context2.next=5;return axios.get(\"http://192.168.14.33/otcs/llisapi.dll?func=ll&objId=116190&objAction=RunReport&key=\"+key);case 5:response=_context2.sent;data=response.data;data.pop();set({companyDetails:{name:data[0].CNAME,segment:data[0].SERVICENAME!=='?'?data[0].SERVICENAME:'',share:data[0].CSHARE!=='?'?data[0].CSHARE:'',numberOfEmployees:data[0].COUNTEMP!=='?'?data[0].COUNTEMP:'',ceo:data[0].NNAME!=='?'?data[0].NNAME:'',countryOfOperation:''}});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleGetCompanyDetails(_x3,_x4){return _ref2.apply(this,arguments);};}();var handleGetDirectors=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(set,get){var params,key,response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:params=new URLSearchParams(window.location.search);key=parseInt(params.get(\"key\"));if(Number.isNaN(key)){_context3.next=11;break;}_context3.next=5;return axios.get(\"http://192.168.14.33/otcs/llisapi.dll?func=ll&objId=116138&objAction=RunReport&key=\"+key);case 5:response=_context3.sent;data=response.data;data.pop();data=data.map(function(x){return x.NAME;});console.log(data);set({directorList:data});case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function handleGetDirectors(_x5,_x6){return _ref3.apply(this,arguments);};}();var store=function store(set,get){return{companyDetails:{name:'',segment:'',share:0,numberOfEmployees:0,ceo:'',countryOfOperation:''},directorList:[],setCompanyDetails:function setCompanyDetails(args){return handleSetCompany(set,get,args);},setInitialCompanyDetails:function setInitialCompanyDetails(){return set({companyDetails:{name:'',segment:'',share:0,numberOfEmployees:0,ceo:'',countryOfOperation:''}});},initWorkflow:function initWorkflow(){return handleInitiateWorkflow(set,get);},getCompanyDetails:function getCompanyDetails(){return handleGetCompanyDetails(set,get);},getDirectors:function getDirectors(){return handleGetDirectors(set,get);}};};var useStore=create(devtools(store));export default useStore;","map":{"version":3,"sources":["/home/user/Downloads/socar_tree_view/src/stores/useStore.js"],"names":["axios","create","devtools","initiateWorkflow","handleSetCompany","set","get","args","companyDetails","Object","assign","object","property","name","value","segment","share","numberOfEmployees","ceo","countryOfOperation","handleInitiateWorkflow","cname","countemp","handleGetCompanyDetails","params","URLSearchParams","window","location","search","key","parseInt","Number","isNaN","response","data","pop","CNAME","SERVICENAME","CSHARE","COUNTEMP","NNAME","handleGetDirectors","map","x","NAME","console","log","directorList","store","setCompanyDetails","setInitialCompanyDetails","initWorkflow","getCompanyDetails","getDirectors","useStore"],"mappings":"yYAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,SAAnB,CACA,OAAQC,QAAR,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,kDAA7B,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAMC,GAAN,CAAWC,IAAX,CAAoB,CACzC,GAAMC,CAAAA,cAAc,CAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBJ,GAAG,GAAGE,cAAxB,CAAvB,CADyC,yCAEpBD,IAFoB,YAEzC,+CAA2B,IAAhBI,CAAAA,MAAgB,aACvB,OAAQA,MAAM,CAACC,QAAf,EACI,IAAK,MAAL,CACIJ,cAAc,CAACK,IAAf,CAAsBF,MAAM,CAACG,KAA7B,CACA,MACJ,IAAK,SAAL,CACIN,cAAc,CAACO,OAAf,CAAyBJ,MAAM,CAACG,KAAhC,CACA,MACJ,IAAK,OAAL,CACIN,cAAc,CAACQ,KAAf,CAAuBL,MAAM,CAACG,KAA9B,CACA,MACJ,IAAK,mBAAL,CACIN,cAAc,CAACS,iBAAf,CAAmCN,MAAM,CAACG,KAA1C,CACA,MACJ,IAAK,KAAL,CACIN,cAAc,CAACU,GAAf,CAAqBP,MAAM,CAACG,KAA5B,CACA,MACJ,IAAK,oBAAL,CACIN,cAAc,CAACW,kBAAf,CAAoCR,MAAM,CAACG,KAA3C,CACA,MACJ,QACI,MApBR,CAsBH,CAzBwC,qDA0BzCT,GAAG,CAAC,CAACG,cAAc,CAAdA,cAAD,CAAD,CAAH,CACH,CA3BD,CA6BA,GAAMY,CAAAA,sBAAsB,0FAAG,iBAAOf,GAAP,CAAYC,GAAZ,0IACrBE,cADqB,CACJF,GAAG,GAAGE,cADF,CAErBD,IAFqB,CAEd,CACTc,KAAK,CAAEb,cAAc,CAACK,IADb,CAETS,QAAQ,CAAEd,cAAc,CAACS,iBAFhB,CAGTC,GAAG,CAAEV,cAAc,CAACU,GAHX,CAFc,uBAOrBf,CAAAA,gBAAgB,CAACI,IAAD,CAPK,uDAAH,kBAAtBa,CAAAA,sBAAsB,gDAA5B,CAUA,GAAMG,CAAAA,uBAAuB,2FAAG,kBAAOlB,GAAP,CAAYC,GAAZ,mJACxBkB,MADwB,CACf,GAAIC,CAAAA,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CADe,CAExBC,GAFwB,CAElBC,QAAQ,CAACN,MAAM,CAAClB,GAAP,CAAW,KAAX,CAAD,CAFU,IAGxByB,MAAM,CAACC,KAAP,CAAaH,GAAb,CAHwB,iDAID7B,CAAAA,KAAK,CAACM,GAAN,CAAU,sFAAsFuB,GAAhG,CAJC,QAIlBI,QAJkB,gBAKlBC,IALkB,CAKXD,QAAQ,CAACC,IALE,CAMxBA,IAAI,CAACC,GAAL,GACA9B,GAAG,CAAC,CACAG,cAAc,CAAE,CACZK,IAAI,CAAEqB,IAAI,CAAC,CAAD,CAAJ,CAAQE,KADF,CAEZrB,OAAO,CAAEmB,IAAI,CAAC,CAAD,CAAJ,CAAQG,WAAR,GAAwB,GAAxB,CAA8BH,IAAI,CAAC,CAAD,CAAJ,CAAQG,WAAtC,CAAoD,EAFjD,CAGZrB,KAAK,CAAEkB,IAAI,CAAC,CAAD,CAAJ,CAAQI,MAAR,GAAmB,GAAnB,CAAyBJ,IAAI,CAAC,CAAD,CAAJ,CAAQI,MAAjC,CAA0C,EAHrC,CAIZrB,iBAAiB,CAAEiB,IAAI,CAAC,CAAD,CAAJ,CAAQK,QAAR,GAAqB,GAArB,CAA2BL,IAAI,CAAC,CAAD,CAAJ,CAAQK,QAAnC,CAA8C,EAJrD,CAKZrB,GAAG,CAAEgB,IAAI,CAAC,CAAD,CAAJ,CAAQM,KAAR,GAAkB,GAAlB,CAAwBN,IAAI,CAAC,CAAD,CAAJ,CAAQM,KAAhC,CAAwC,EALjC,CAMZrB,kBAAkB,CAAE,EANR,CADhB,CAAD,CAAH,CAPwB,wDAAH,kBAAvBI,CAAAA,uBAAuB,kDAA7B,CAoBA,GAAMkB,CAAAA,kBAAkB,2FAAG,kBAAOpC,GAAP,CAAYC,GAAZ,mJACnBkB,MADmB,CACV,GAAIC,CAAAA,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CADU,CAEnBC,GAFmB,CAEbC,QAAQ,CAACN,MAAM,CAAClB,GAAP,CAAW,KAAX,CAAD,CAFK,IAGnByB,MAAM,CAACC,KAAP,CAAaH,GAAb,CAHmB,kDAII7B,CAAAA,KAAK,CAACM,GAAN,CAAU,sFAAsFuB,GAAhG,CAJJ,QAIbI,QAJa,gBAKfC,IALe,CAKRD,QAAQ,CAACC,IALD,CAMnBA,IAAI,CAACC,GAAL,GACAD,IAAI,CAAGA,IAAI,CAACQ,GAAL,CAAS,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,IAAJ,EAAV,CAAP,CACAC,OAAO,CAACC,GAAR,CAAYZ,IAAZ,EACA7B,GAAG,CAAC,CACA0C,YAAY,CAAEb,IADd,CAAD,CAAH,CATmB,yDAAH,kBAAlBO,CAAAA,kBAAkB,kDAAxB,CAeA,GAAMO,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAAC3C,GAAD,CAAMC,GAAN,QAAe,CACzBE,cAAc,CAAE,CACZK,IAAI,CAAE,EADM,CAEZE,OAAO,CAAE,EAFG,CAGZC,KAAK,CAAE,CAHK,CAIZC,iBAAiB,CAAE,CAJP,CAKZC,GAAG,CAAE,EALO,CAMZC,kBAAkB,CAAE,EANR,CADS,CASzB4B,YAAY,CAAE,EATW,CAUzBE,iBAAiB,CAAG,2BAAA1C,IAAI,QAAIH,CAAAA,gBAAgB,CAACC,GAAD,CAAMC,GAAN,CAAWC,IAAX,CAApB,EAVC,CAWzB2C,wBAAwB,CAAE,0CAAM7C,CAAAA,GAAG,CAAC,CAACG,cAAc,CAAE,CACjDK,IAAI,CAAE,EAD2C,CAEjDE,OAAO,CAAE,EAFwC,CAGjDC,KAAK,CAAE,CAH0C,CAIjDC,iBAAiB,CAAE,CAJ8B,CAKjDC,GAAG,CAAE,EAL4C,CAMjDC,kBAAkB,CAAE,EAN6B,CAAjB,CAAD,CAAT,EAXD,CAmBzBgC,YAAY,CAAE,8BAAM/B,CAAAA,sBAAsB,CAACf,GAAD,CAAMC,GAAN,CAA5B,EAnBW,CAoBzB8C,iBAAiB,CAAE,mCAAM7B,CAAAA,uBAAuB,CAAClB,GAAD,CAAMC,GAAN,CAA7B,EApBM,CAqBzB+C,YAAY,CAAE,8BAAMZ,CAAAA,kBAAkB,CAACpC,GAAD,CAAMC,GAAN,CAAxB,EArBW,CAAf,EAAd,CAwBA,GAAMgD,CAAAA,QAAQ,CAAGrD,MAAM,CAACC,QAAQ,CAAC8C,KAAD,CAAT,CAAvB,CAEA,cAAeM,CAAAA,QAAf","sourcesContent":["import axios from 'axios';\r\nimport create from 'zustand';\r\nimport {devtools} from 'zustand/middleware';\r\nimport initiateWorkflow from '../feautures/companyDetails/api/initiateWorkflow';\r\n\r\nconst handleSetCompany = (set, get, args) => {\r\n    const companyDetails = Object.assign({}, get().companyDetails);\r\n    for (const object of args) {\r\n        switch (object.property) {\r\n            case 'name':\r\n                companyDetails.name = object.value;\r\n                break;\r\n            case 'segment':\r\n                companyDetails.segment = object.value; \r\n                break;\r\n            case 'share':\r\n                companyDetails.share = object.value;\r\n                break;\r\n            case 'numberOfEmployees':\r\n                companyDetails.numberOfEmployees = object.value;\r\n                break;\r\n            case 'ceo':\r\n                companyDetails.ceo = object.value;\r\n                break;\r\n            case 'countryOfOperation':\r\n                companyDetails.countryOfOperation = object.value;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    set({companyDetails});\r\n}\r\n\r\nconst handleInitiateWorkflow = async (set, get) => {\r\n    const companyDetails = get().companyDetails;\r\n    const args = {\r\n        cname: companyDetails.name,\r\n        countemp: companyDetails.numberOfEmployees,\r\n        ceo: companyDetails.ceo\r\n    };\r\n    await initiateWorkflow(args);\r\n}\r\n\r\nconst handleGetCompanyDetails = async (set, get) => {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let key = parseInt(params.get(\"key\"));\r\n    if(!Number.isNaN(key)){\r\n        const response = await axios.get(\"http://192.168.14.33/otcs/llisapi.dll?func=ll&objId=116190&objAction=RunReport&key=\"+key);\r\n        const data = response.data;\r\n        data.pop();\r\n        set({\r\n            companyDetails: {\r\n                name: data[0].CNAME,\r\n                segment: data[0].SERVICENAME !== '?' ? data[0].SERVICENAME : '',\r\n                share: data[0].CSHARE !== '?' ? data[0].CSHARE : '',\r\n                numberOfEmployees: data[0].COUNTEMP !== '?' ? data[0].COUNTEMP : '',\r\n                ceo: data[0].NNAME !== '?' ? data[0].NNAME : '',\r\n                countryOfOperation: ''\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nconst handleGetDirectors = async (set, get) => {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let key = parseInt(params.get(\"key\"));\r\n    if(!Number.isNaN(key)){\r\n        const response = await axios.get(\"http://192.168.14.33/otcs/llisapi.dll?func=ll&objId=116138&objAction=RunReport&key=\"+key);\r\n        let data = response.data;\r\n        data.pop();\r\n        data = data.map(x=>x.NAME);\r\n        console.log(data);\r\n        set({\r\n            directorList: data\r\n        })\r\n    }\r\n}\r\n\r\nconst store = (set, get) => ({\r\n    companyDetails: {\r\n        name: '',\r\n        segment: '',\r\n        share: 0,\r\n        numberOfEmployees: 0,\r\n        ceo: '',\r\n        countryOfOperation: ''\r\n    },\r\n    directorList: [],\r\n    setCompanyDetails:  args => handleSetCompany(set, get, args),\r\n    setInitialCompanyDetails: () => set({companyDetails: {\r\n        name: '',\r\n        segment: '',\r\n        share: 0,\r\n        numberOfEmployees: 0,\r\n        ceo: '',\r\n        countryOfOperation: ''\r\n    }}),\r\n    initWorkflow: () => handleInitiateWorkflow(set, get),\r\n    getCompanyDetails: () => handleGetCompanyDetails(set, get),\r\n    getDirectors: () => handleGetDirectors(set, get)\r\n})\r\n\r\nconst useStore = create(devtools(store));\r\n\r\nexport default useStore;"]},"metadata":{},"sourceType":"module"}