{"ast":null,"code":"import _objectSpread from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/user/Downloads/socar_tree_view/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import BoardMembersComponent from\"./BoardMembersComponent\";import useStore from'../../../stores/useStore';import shallow from'zustand/shallow';import initiateWorkflow from\"../../api/initiateWorkflow\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var getState=function getState(state){return[state.directorList,state.getDirectors,state.representativeList,state.getRepresentatives,state.repListWarn,state.dirListWarn,state.initWorkflow];};var BoardMembers=function BoardMembers(){var _useStore=useStore(getState,shallow),_useStore2=_slicedToArray(_useStore,7),directorList=_useStore2[0],getDirectors=_useStore2[1],representativeList=_useStore2[2],getRepresentatives=_useStore2[3],repListWarn=_useStore2[4],dirListWarn=_useStore2[5],initWorkflow=_useStore2[6];useEffect(function(){getDirectors();},[getDirectors]);useEffect(function(){getRepresentatives();},[getRepresentatives]);var _useState=useState(directorList),_useState2=_slicedToArray(_useState,2),names=_useState2[0],setNames=_useState2[1];var _useState3=useState(representativeList),_useState4=_slicedToArray(_useState3,2),namesR=_useState4[0],setNamesR=_useState4[1];useEffect(function(){setNames(directorList);},[directorList]);useEffect(function(){setNamesR(representativeList);},[representativeList]);var handleChangeDirectors=function handleChangeDirectors(event,id){var values=_toConsumableArray(names);values[id][event.target.name]=event.target.value;setNames(values);};var handleChangeRep=function handleChangeRep(event,id){var valuesR=_toConsumableArray(namesR);valuesR[id][event.target.name]=event.target.value;setNamesR(valuesR);};var addName=function addName(){setNames([].concat(_toConsumableArray(names),[{dirname:\"\"}]));};var addNameR=function addNameR(){setNamesR([].concat(_toConsumableArray(namesR),[{repname:\"\"}]));};var deleteName=function deleteName(e,id){e.preventDefault();var list=_toConsumableArray(names);list.splice(id,1);setNames(list);};var deleteNameR=function deleteNameR(e,id){e.preventDefault();var list=_toConsumableArray(namesR);list.splice(id,1);setNamesR(list);};//remove keys for tag\nvar namesValue=[];var namesRValue=[];for(var i=0;i<names.length;i++){namesValue.push(names[i].dirname);}for(var j=0;j<namesR.length;j++){namesRValue.push(namesR[j].repname);}// check if any change happened\nvar checkChangeDir=false;var checkChangeRep=false;if(dirListWarn.length!==names.length){checkChangeDir=true;}else{for(var n=0;n<dirListWarn.length;n++){if(dirListWarn[n].dirname!==names[n].dirname){checkChangeDir=true;}}}if(repListWarn.length!==namesR.length){checkChangeRep=true;}else{for(var m=0;m<repListWarn.length;m++){if(repListWarn[m].repname!==namesR[m].repname){checkChangeRep=true;}}}console.log(checkChangeDir);console.log(checkChangeRep);var args={names:names,namesR:namesR,handleChangeDirectors:handleChangeDirectors,handleChangeRep:handleChangeRep,addName:addName,addNameR:addNameR,deleteName:deleteName,deleteNameR:deleteNameR,onSubmitForm:function onSubmitForm(){var params=new URLSearchParams(window.location.search);var key=parseInt(params.get(\"key\"));var args={cid:key,directorList:namesValue,directorLength:namesValue.length,representativeList:namesRValue,representativeLength:namesRValue.length,changeDir:checkChangeDir,changeRep:checkChangeRep};initiateWorkflow(args);}};return/*#__PURE__*/_jsx(BoardMembersComponent,_objectSpread({},args));};export default BoardMembers;","map":{"version":3,"sources":["/home/user/Downloads/socar_tree_view/src/feautures/boardMembers/views/BoardMembers.js"],"names":["BoardMembersComponent","useStore","shallow","initiateWorkflow","useEffect","useState","getState","state","directorList","getDirectors","representativeList","getRepresentatives","repListWarn","dirListWarn","initWorkflow","BoardMembers","names","setNames","namesR","setNamesR","handleChangeDirectors","event","id","values","target","name","value","handleChangeRep","valuesR","addName","dirname","addNameR","repname","deleteName","e","preventDefault","list","splice","deleteNameR","namesValue","namesRValue","i","length","push","j","checkChangeDir","checkChangeRep","n","m","console","log","args","onSubmitForm","params","URLSearchParams","window","location","search","key","parseInt","get","cid","directorLength","representativeLength","changeDir","changeRep"],"mappings":"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","sourcesContent":["import BoardMembersComponent from \"./BoardMembersComponent\";\r\nimport useStore from '../../../stores/useStore';\r\nimport shallow from 'zustand/shallow';\r\nimport initiateWorkflow from \"../../api/initiateWorkflow\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst getState = state => [\r\n    state.directorList,\r\n    state.getDirectors,\r\n    state.representativeList,\r\n    state.getRepresentatives,\r\n    state.repListWarn,\r\n    state.dirListWarn,\r\n    state.initWorkflow\r\n];\r\n\r\nconst BoardMembers = () => {\r\n    const [directorList, getDirectors, representativeList, getRepresentatives, repListWarn, dirListWarn, initWorkflow] = useStore(getState, shallow);\r\n\r\n    useEffect(()=>{\r\n        getDirectors();\r\n    }, [getDirectors]);\r\n\r\n    useEffect(()=>{\r\n        getRepresentatives();\r\n    }, [getRepresentatives]);\r\n\r\n    const [names, setNames] = useState(directorList);\r\n    const [namesR, setNamesR] = useState(representativeList);\r\n\r\n    useEffect(() => {\r\n      setNames(directorList);\r\n    }, [directorList]);\r\n    useEffect(() => {\r\n      setNamesR(representativeList);\r\n    }, [representativeList]);\r\n\r\n    const handleChangeDirectors = (event, id) => {\r\n        const values = [...names];\r\n        values[id][event.target.name] = event.target.value;\r\n        setNames(values);\r\n    };\r\n    const handleChangeRep = (event, id) => {\r\n        const valuesR = [...namesR];\r\n        valuesR[id][event.target.name] = event.target.value;\r\n        setNamesR(valuesR);\r\n    };\r\n\r\n    const addName = () => {\r\n        setNames([...names, {dirname: \"\"}]);\r\n    };\r\n      const addNameR = () => {\r\n        setNamesR([...namesR, {repname: \"\"}]);\r\n    };\r\n    const deleteName = (e, id) => {\r\n        e.preventDefault();\r\n        const list = [...names];  \r\n        list.splice(id, 1);\r\n        setNames(list);\r\n    };\r\n    const deleteNameR = (e, id) => {\r\n       e.preventDefault();\r\n       const list = [...namesR];\r\n       list.splice(id, 1);\r\n       setNamesR(list);\r\n    };\r\n    //remove keys for tag\r\n    const namesValue = [];\r\n    const namesRValue = [];\r\n    for (var i=0;i<names.length;i++){\r\n        namesValue.push(names[i].dirname);\r\n    }\r\n    for (var j=0;j<namesR.length;j++){\r\n        namesRValue.push(namesR[j].repname);\r\n    }\r\n    // check if any change happened\r\n    var checkChangeDir = false;\r\n    var checkChangeRep = false;\r\n    if (dirListWarn.length !== names.length){\r\n        checkChangeDir = true;\r\n    }else{\r\n        for(var n=0;n<dirListWarn.length;n++){\r\n            if(dirListWarn[n].dirname !== names[n].dirname){\r\n                checkChangeDir = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (repListWarn.length !== namesR.length){\r\n        checkChangeRep = true;\r\n    }else{\r\n        for(var m=0;m<repListWarn.length;m++){\r\n            if(repListWarn[m].repname !== namesR[m].repname){\r\n                checkChangeRep = true;\r\n            }\r\n        }\r\n    }\r\n    console.log(checkChangeDir);\r\n    console.log(checkChangeRep);\r\n    const args = {\r\n        names,\r\n        namesR,\r\n        handleChangeDirectors,\r\n        handleChangeRep,\r\n        addName,\r\n        addNameR,\r\n        deleteName,\r\n        deleteNameR,\r\n        onSubmitForm: () => {\r\n            let params = new URLSearchParams(window.location.search);\r\n            let key = parseInt(params.get(\"key\"));\r\n            const args = {\r\n                cid: key,\r\n                directorList: namesValue,\r\n                directorLength: namesValue.length,\r\n                representativeList: namesRValue,\r\n                representativeLength: namesRValue.length,\r\n                changeDir: checkChangeDir,\r\n                changeRep: checkChangeRep\r\n            };\r\n            initiateWorkflow(args);\r\n        }\r\n    };\r\n    return <BoardMembersComponent {...args} />\r\n}\r\n\r\nexport default BoardMembers;"]},"metadata":{},"sourceType":"module"}